<% include ../partials/headerMap %>

<div id="panel">
  <input onclick="clearMarkers();" type=button value="Hide Markers">
  <input onclick="showMarkers();" type=button value="Show All Markers">
  <input onclick="deleteMarkers();" type=button value="Delete Markers">
  <br>
  <div id="top">
	  <span id="GF">GF</span>
	  <span id="DF">DF</span>
	  <span id="EF">EF</span>
	  <span id="SF">SF</span>
  </div>
</div>

<div id="rightPanel">
  <input onclick="clearMarkers();" type=button value="Hide Markers">
  <input onclick="showMarkers();" type=button value="Show All Markers">
  <input onclick="deleteMarkers();" type=button value="Delete Markers">
  <br>
  <div id="top">
	  <span id="GF">GF</span>
	  <span id="DF">DF</span>
	  <span id="EF">EF</span>
	  <span id="SF">SF</span>
  </div>
</div>




<!-- <form method="POST" action="/login" >
  <input type="submit" value="LogOUT" class="btn btn-primary">
</form> -->




<div id="map-canvas"></div>

<a href="/logout">Logout</a>
<br>
<a href="/restaurants/new">Create a new restaurant</a>

<table data-toggle="table" data-height="299" class="table table-striped table-hover">
	<thead>
		<tr>
			<th data-field="name">Name</th>
			<th data-field="address">Address</th>
			<th data-field="options">Options</th>
			<th data-field="hours">Hours</th>
			<th data-field="costs">Costs</th>
			<th data-field="edit">Edit</th>
			<th data-field="comment">Add a Comment</th>
			<th data-field="user">Created By</th>
			<th data-field="items">Items</th>
		</tr>
	</thead>
	<tbody>
		<% var allR = []; %>
		<% restaurants.forEach(function (restaurant){ %>
		<tr>
			<td><%=restaurant.name%></td>
			<td><%=restaurant.address%></td>
			<td><%=logOptions(restaurant.user)%></td>
			<td><%=restaurant.hours%></td>
			<td><%=restaurant.cost%></td>
			<%=  %>


			<td><a href="/restaurants/<%=restaurant.id%>/edit"> edit restaurant</a></td>
			<td><a href="/restaurants/<%=restaurant.id%>/comments/new"> add a comment</a> </td>
			<td><form action="/restaurants/<%=restaurant.id%>?_method=delete" method="POST">
				<input type="submit" value="X" class="btn btn-danger btn-sm">
			</form></td>
			<td><%=restaurant.user.username%></td>
			<td><a href="/restaurants/<%=restaurant.id%>/items"> See Items</a> </td>
		</tr>
		<% allR.push(restaurant.address + "!"); %>
		<% }) %>
	</tbody>
</table>
<input type="hidden" name="allR" id="allR" value="<%=allR%>">



<%function logOptions(restUser){  %>
	<% var tempArr = []%>
	<% if (restUser.gf){ %>
		<% tempArr.push ("GF")  %>
		<%  %>
	<% }  %> <!- end if->

	<% if (restUser.df){ %>
		<% tempArr.push ("DF")  %>
		<%  %>
	<% }  %> <!- end if->

	<% if (restUser.ef){ %>
		<% tempArr.push ("EF")  %>
		<%  %>
	<% }  %> <!- end if->

	<% if (restUser.sf){ %>
		<% tempArr.push ("SF")  %>
		<%  %>
	<% }  %> <!- end if->

	<% return tempArr %>

<%}  %> <!- end logOptions->



<% include ../partials/footer %>